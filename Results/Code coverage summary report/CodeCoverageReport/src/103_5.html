<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>D:\Programming\Projects\LlmUnitTestGenerationArtifacts\DeepSeekR10528UnitTests\Sample4Tests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using AutoMapper;
using Dataset.Sample4;
using NSubstitute;

namespace DeepSeekR10528UnitTests;

public class CompanyServiceTests
{
    private readonly ICompanyRepository _companyRepository;
    private readonly IMapper _mapper;
    private readonly CompanyService _sut;

    public CompanyServiceTests()
    {
        _companyRepository = Substitute.For&lt;ICompanyRepository&gt;();
        _mapper = Substitute.For&lt;IMapper&gt;();
        _sut = new CompanyService(_companyRepository, _mapper);
    }

    [Fact]
    public async Task GetAsync_ValidEntityFound_ReturnsMappedModel()
    {
        // Arrange
        var entity = new CompanyEntity { Id = 1, Name = &quot;Test&quot;, Description = &quot;Description&quot; };
        var expectedModel = new CompanyModel();
        _companyRepository.GetAsync(1).Returns(Task.FromResult&lt;CompanyEntity&gt;(entity));
        _mapper.Map&lt;CompanyModel&gt;(entity).Returns(expectedModel);

        // Act
        var result = await _sut.GetAsync(1);

        // Assert
        Assert.Same(expectedModel, result);
    }

    [Fact]
    public async Task GetAsync_EntityNotFound_ReturnsNull()
    {
        // Arrange
        _companyRepository.GetAsync(999).Returns(Task.FromResult&lt;CompanyEntity&gt;(null!));
        _mapper.Map&lt;CompanyModel&gt;(null!).Returns((CompanyModel)null!);

        // Act
        var result = await _sut.GetAsync(999);

        // Assert
        Assert.Null(result);
    }

    [Theory]
    [InlineData(1)]
    [InlineData(5)]
    [InlineData(100)]
    public async Task GetAsync_WithId_CallsRepositoryWithCorrectId(int id)
    {
        // Arrange
        _companyRepository.GetAsync(id).Returns(Task.FromResult&lt;CompanyEntity&gt;(null!));
        _mapper.Map&lt;CompanyModel&gt;(null!).Returns((CompanyModel)null!);

        // Act
        await _sut.GetAsync(id);

        // Assert
        await _companyRepository.Received(1).GetAsync(id);
    }

    [Fact]
    public async Task GetAsync_WithoutId_UsesDefaultId()
    {
        // Arrange
        const int defaultId = 1;
        _companyRepository.GetAsync(defaultId).Returns(Task.FromResult&lt;CompanyEntity&gt;(null!));
        _mapper.Map&lt;CompanyModel&gt;(null!).Returns((CompanyModel)null!);

        // Act
        await _sut.GetAsync();

        // Assert
        await _companyRepository.Received(1).GetAsync(defaultId);
    }

    [Fact]
    public async Task GetAsync_ValidEntity_CallsMapperWithRepositoryResult()
    {
        // Arrange
        var entity = new CompanyEntity { Id = 2, Name = &quot;ABC&quot;, Description = &quot;Test Desc&quot; };
        _companyRepository.GetAsync(2).Returns(Task.FromResult(entity));
        var model = new CompanyModel();
        _mapper.Map&lt;CompanyModel&gt;(entity).Returns(model);

        // Act
        await _sut.GetAsync(2);

        // Assert
        _mapper.Received(1).Map&lt;CompanyModel&gt;(entity);
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[13,5,13,33,1],[14,5,14,6,1],[15,9,15,67,1],[16,9,16,45,1],[17,9,17,64,1],[18,5,18,6,1],[22,5,22,6,1],[24,9,24,95,1],[25,9,25,48,1],[26,9,26,88,1],[27,9,27,66,1],[30,9,30,45,1],[33,9,33,44,1],[34,5,34,6,1],[38,5,38,6,1],[40,9,40,89,1],[41,9,41,71,1],[44,9,44,47,1],[47,9,47,29,1],[48,5,48,6,1],[55,5,55,6,1],[57,9,57,88,1],[58,9,58,71,1],[61,9,61,33,1],[64,9,64,59,1],[65,5,65,6,1],[69,5,69,6,1],[72,9,72,95,1],[73,9,73,71,1],[76,9,76,31,1],[79,9,79,66,1],[80,5,80,6,1],[84,5,84,6,1],[86,9,86,92,1],[87,9,87,73,1],[88,9,88,40,1],[89,9,89,58,1],[92,9,92,32,1],[95,9,95,55,1],[96,5,96,6,1]]);
    </script>
  </body>
</html>