<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>D:\Programming\Projects\LlmUnitTestGenerationArtifacts\Gpt5MiniUnitTests\Sample8Tests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using Dataset.Sample8;

namespace Gpt5MiniUnitTests
{
    public class LuTests
    {
        [Fact]
        public void Decompose_SquareMatrix_ReturnsLowerAndUpperWhichMultiplyToSource()
        {
            // Arrange
            var lu = new Lu();
            var source = new double[,]
            {
                { 2, 1, -1 },
                { -3, -1, 2 },
                { -2, 1, 2 }
            };

            // Act
            var (L, U) = lu.Decompose(source);

            // Assert
            Assert.Equal(source.GetLength(0), L.GetLength(0));
            Assert.Equal(source.GetLength(1), L.GetLength(1));
            Assert.Equal(source.GetLength(0), U.GetLength(0));
            Assert.Equal(source.GetLength(1), U.GetLength(1));

            var product = MultiplyMatrices(L, U);
            for (int i = 0; i &lt; source.GetLength(0); i++)
            {
                for (int j = 0; j &lt; source.GetLength(1); j++)
                {
                    Assert.Equal(source[i, j], product[i, j], 10);
                }
            }
        }

        [Fact]
        public void Decompose_1x1Matrix_ReturnsLIdentityAndUEqualValue()
        {
            // Arrange
            var lu = new Lu();
            var source = new double[,]
            {
                { 5.0 }
            };

            // Act
            var (L, U) = lu.Decompose(source);

            // Assert
            Assert.Equal(1, L.GetLength(0));
            Assert.Equal(1, L.GetLength(1));
            Assert.Equal(1, U.GetLength(0));
            Assert.Equal(1, U.GetLength(1));
            Assert.Equal(1.0, L[0, 0], 10);
            Assert.Equal(5.0, U[0, 0], 10);
        }

        [Fact]
        public void Decompose_NonSquare_ThrowsArgumentException()
        {
            // Arrange
            var lu = new Lu();
            var nonSquare = new double[,]
            {
                { 1.0, 2.0, 3.0 },
                { 4.0, 5.0, 6.0 }
            };

            // Act &amp; Assert
            Assert.Throws&lt;ArgumentException&gt;(() =&gt; lu.Decompose(nonSquare));
        }

        [Fact]
        public void Eliminate_SolvesLinearSystem_ReturnsSolution()
        {
            // Arrange
            var lu = new Lu();
            var matrix = new double[,]
            {
                { 2.0, 1.0, -1.0 },
                { -3.0, -1.0, 2.0 },
                { -2.0, 1.0, 2.0 }
            };
            var coefficients = new double[] { 8.0, -11.0, -3.0 }; // expected solution [2,3,-1]

            // Act
            var solution = lu.Eliminate(matrix, coefficients);

            // Assert
            Assert.Equal(3, solution.Length);
            Assert.Equal(2.0, solution[0], 10);
            Assert.Equal(3.0, solution[1], 10);
            Assert.Equal(-1.0, solution[2], 10);
        }

        [Fact]
        public void Eliminate_1x1Matrix_ReturnsSolution()
        {
            // Arrange
            var lu = new Lu();
            var matrix = new double[,] { { 5.0 } };
            var coefficients = new double[] { 10.0 }; // 5 * x = 10 -&gt; x = 2

            // Act
            var solution = lu.Eliminate(matrix, coefficients);

            // Assert
            Assert.Single(solution);
            Assert.Equal(2.0, solution[0], 10);
        }

        [Fact]
        public void Eliminate_NonSquare_ThrowsArgumentException()
        {
            // Arrange
            var lu = new Lu();
            var nonSquare = new double[,]
            {
                { 1.0, 2.0, 3.0 },
                { 4.0, 5.0, 6.0 }
            };
            var coefficients = new double[] { 1.0, 2.0 };

            // Act &amp; Assert
            Assert.Throws&lt;ArgumentException&gt;(() =&gt; lu.Eliminate(nonSquare, coefficients));
        }

        [Fact]
        public void Eliminate_SingularMatrix_ReturnsNaNValues()
        {
            // Arrange
            var lu = new Lu();
            var zeroMatrix = new double[,]
            {
                { 0.0, 0.0 },
                { 0.0, 0.0 }
            };
            var coefficients = new double[] { 0.0, 0.0 };

            // Act
            var solution = lu.Eliminate(zeroMatrix, coefficients);

            // Assert
            Assert.Equal(2, solution.Length);
            Assert.True(double.IsNaN(solution[0]) || double.IsInfinity(solution[0]));
            Assert.True(double.IsNaN(solution[1]) || double.IsInfinity(solution[1]));
        }

        private static double[,] MultiplyMatrices(double[,] a, double[,] b)
        {
            int aRows = a.GetLength(0);
            int aCols = a.GetLength(1);
            int bRows = b.GetLength(0);
            int bCols = b.GetLength(1);

            if (aCols != bRows) throw new ArgumentException(&quot;Incompatible matrices for multiplication.&quot;);

            var result = new double[aRows, bCols];
            for (int i = 0; i &lt; aRows; i++)
            {
                for (int j = 0; j &lt; bCols; j++)
                {
                    double sum = 0.0;
                    for (int k = 0; k &lt; aCols; k++)
                    {
                        sum += a[i, k] * b[k, j];
                    }
                    result[i, j] = sum;
                }
            }
            return result;
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[9,9,9,10,1],[11,13,11,31,1],[12,13,17,15,1],[20,13,20,47,1],[23,13,23,63,1],[24,13,24,63,1],[25,13,25,63,1],[26,13,26,63,1],[28,13,28,50,1],[29,18,29,27,1],[29,29,29,52,1],[29,54,29,57,1],[30,13,30,14,1],[31,22,31,31,1],[31,33,31,56,1],[31,58,31,61,1],[32,17,32,18,1],[33,21,33,67,1],[34,17,34,18,1],[35,13,35,14,1],[36,9,36,10,1],[40,9,40,10,1],[42,13,42,31,1],[43,13,46,15,1],[49,13,49,47,1],[52,13,52,45,1],[53,13,53,45,1],[54,13,54,45,1],[55,13,55,45,1],[56,13,56,44,1],[57,13,57,44,1],[58,9,58,10,1],[62,9,62,10,1],[64,13,64,31,1],[65,13,69,15,1],[72,13,72,52,1],[72,52,72,75,1],[72,75,72,77,1],[73,9,73,10,1],[77,9,77,10,1],[79,13,79,31,1],[80,13,85,15,1],[86,13,86,66,1],[89,13,89,63,1],[92,13,92,46,1],[93,13,93,48,1],[94,13,94,48,1],[95,13,95,49,1],[96,9,96,10,1],[100,9,100,10,1],[102,13,102,31,1],[103,13,103,52,1],[104,13,104,54,1],[107,13,107,63,1],[110,13,110,37,1],[111,13,111,48,1],[112,9,112,10,1],[116,9,116,10,1],[118,13,118,31,1],[119,13,123,15,1],[124,13,124,58,1],[127,13,127,52,1],[127,52,127,89,1],[127,89,127,91,1],[128,9,128,10,1],[132,9,132,10,1],[134,13,134,31,1],[135,13,139,15,1],[140,13,140,58,1],[143,13,143,67,1],[146,13,146,46,1],[147,13,147,86,1],[148,13,148,86,1],[149,9,149,10,1],[152,9,152,10,1],[153,13,153,40,1],[154,13,154,40,1],[155,13,155,40,1],[156,13,156,40,1],[158,13,158,32,1],[158,33,158,106,0],[160,13,160,51,1],[161,18,161,27,1],[161,29,161,38,1],[161,40,161,43,1],[162,13,162,14,1],[163,22,163,31,1],[163,33,163,42,1],[163,44,163,47,1],[164,17,164,18,1],[165,21,165,38,1],[166,26,166,35,1],[166,37,166,46,1],[166,48,166,51,1],[167,21,167,22,1],[168,25,168,50,1],[169,21,169,22,1],[170,21,170,40,1],[171,17,171,18,1],[172,13,172,14,1],[173,13,173,27,1],[174,9,174,10,1]]);
    </script>
  </body>
</html>