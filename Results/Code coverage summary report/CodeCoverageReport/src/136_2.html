<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>D:\Programming\Projects\LlmUnitTestGenerationArtifacts\Glm45AirUnitTests\Sample8Tests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using Dataset.Sample8;

namespace Glm45AirUnitTests;

public class LuTests
{
    public class DecomposeTests
    {
        [Fact]
        public void Decompose_NonSquareMatrix_ThrowsArgumentException()
        {
            // Arrange
            var lu = new Lu();
            var nonSquareMatrix = new double[,] { { 1, 2 }, { 3, 4 }, { 5, 6 } };

            // Act
            var exception = Record.Exception(() =&gt; lu.Decompose(nonSquareMatrix));

            // Assert
            Assert.NotNull(exception);
            Assert.IsType&lt;ArgumentException&gt;(exception);
            Assert.Equal(&quot;Source matrix is not square shaped.&quot;, exception.Message);
        }

        [Theory]
        [InlineData(1)]
        [InlineData(2)]
        [InlineData(3)]
        public void Decompose_SquareMatrix_ReturnsLUMatrices(int size)
        {
            // Arrange
            var lu = new Lu();
            var sourceMatrix = CreateSquareMatrix(size);

            // Act
            var result = lu.Decompose(sourceMatrix);

            // Assert
            Assert.NotNull(result.L);
            Assert.NotNull(result.U);
            Assert.Equal(size, result.L.GetLength(0));
            Assert.Equal(size, result.L.GetLength(1));
            Assert.Equal(size, result.U.GetLength(0));
            Assert.Equal(size, result.U.GetLength(1));
            Assert.Equal(1, result.L[0, 0]);
            Assert.Equal(1, result.L[1, 1]);
            Assert.Equal(1, result.L[size - 1, size - 1]);
        }

        [Fact]
        public void Decompose_IdentityMatrix_ReturnsLUAsIdentityMatrices()
        {
            // Arrange
            var lu = new Lu();
            var identityMatrix = new double[,] { { 1, 0 }, { 0, 1 } };

            // Act
            var result = lu.Decompose(identityMatrix);

            // Assert
            Assert.Equal(identityMatrix, result.L);
            Assert.Equal(identityMatrix, result.U);
        }

        private static double[,] CreateSquareMatrix(int size)
        {
            var matrix = new double[size, size];
            for (var i = 0; i &lt; size; i++)
            {
                for (var j = 0; j &lt; size; j++)
                {
                    matrix[i, j] = i * size + j + 1;
                }
            }
            return matrix;
        }
    }

    public class EliminateTests
    {
        [Fact]
        public void Eliminate_NonSquareMatrix_ThrowsArgumentException()
        {
            // Arrange
            var lu = new Lu();
            var nonSquareMatrix = new double[,] { { 1, 2 }, { 3, 4 }, { 5, 6 } };
            var coefficients = new double[] { 1, 2, 3 };

            // Act
            var exception = Record.Exception(() =&gt; lu.Eliminate(nonSquareMatrix, coefficients));

            // Assert
            Assert.NotNull(exception);
            Assert.IsType&lt;ArgumentException&gt;(exception);
            Assert.Equal(&quot;Matrix of equation coefficients is not square shaped.&quot;, exception.Message);
        }

        [Theory]
        [InlineData(1, new double[] { 1 }, new double[] { 1 })]
        [InlineData(2, new double[] { 1, 2 }, new double[] { 1, 1 })]
        [InlineData(3, new double[] { 1, 2, 3 }, new double[] { 1, 1, 1 })]
        public void Eliminate_SquareMatrix_ReturnsSolution(int size, double[] coefficients, double[] expectedSolution)
        {
            // Arrange
            var lu = new Lu();
            var matrix = CreateSquareMatrix(size);

            // Act
            var solution = lu.Eliminate(matrix, coefficients);

            // Assert
            Assert.NotNull(solution);
            Assert.Equal(size, solution.Length);
            for (var i = 0; i &lt; size; i++)
            {
                Assert.Equal(expectedSolution[i], solution[i], 6);
            }
        }

        [Fact]
        public void Eliminate_IdentityMatrixAndCoefficients_ReturnsSameCoefficientsAsSolution()
        {
            // Arrange
            var lu = new Lu();
            var identityMatrix = new double[,] { { 1, 0 }, { 0, 1 } };
            var coefficients = new[] { 1.5, 2.5 };

            // Act
            var solution = lu.Eliminate(identityMatrix, coefficients);

            // Assert
            Assert.Equal(coefficients, solution);
        }

        private static double[,] CreateSquareMatrix(int size)
        {
            var matrix = new double[size, size];
            for (var i = 0; i &lt; size; i++)
            {
                for (var j = 0; j &lt; size; j++)
                {
                    matrix[i, j] = i * size + j + 1;
                }
            }
            return matrix;
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[11,9,11,10,1],[13,13,13,31,1],[14,13,14,82,1],[17,13,17,52,1],[17,52,17,81,1],[17,81,17,83,1],[20,13,20,39,1],[21,13,21,57,1],[22,13,22,84,1],[23,9,23,10,1],[30,9,30,10,1],[32,13,32,31,1],[33,13,33,57,1],[36,13,36,53,1],[39,13,39,38,1],[40,13,40,38,1],[41,13,41,55,1],[42,13,42,55,1],[43,13,43,55,1],[44,13,44,55,1],[45,13,45,45,1],[46,13,46,45,1],[47,13,47,59,1],[48,9,48,10,1],[52,9,52,10,1],[54,13,54,31,1],[55,13,55,71,1],[58,13,58,55,1],[61,13,61,52,1],[62,13,62,52,1],[63,9,63,10,1],[66,9,66,10,1],[67,13,67,49,1],[68,18,68,27,1],[68,29,68,37,1],[68,39,68,42,1],[69,13,69,14,1],[70,22,70,31,1],[70,33,70,41,1],[70,43,70,46,1],[71,17,71,18,1],[72,21,72,53,1],[73,17,73,18,1],[74,13,74,14,1],[75,13,75,27,1],[76,9,76,10,1],[83,9,83,10,1],[85,13,85,31,1],[86,13,86,82,1],[87,13,87,57,1],[90,13,90,52,1],[90,52,90,95,1],[90,95,90,97,1],[93,13,93,39,1],[94,13,94,57,1],[95,13,95,102,1],[96,9,96,10,1],[103,9,103,10,1],[105,13,105,31,1],[106,13,106,51,1],[109,13,109,63,1],[112,13,112,38,1],[113,13,113,49,1],[114,18,114,27,1],[114,29,114,37,1],[114,39,114,42,1],[115,13,115,14,1],[116,17,116,67,1],[117,13,117,14,1],[118,9,118,10,1],[122,9,122,10,1],[124,13,124,31,1],[125,13,125,71,1],[126,13,126,51,1],[129,13,129,71,1],[132,13,132,50,1],[133,9,133,10,1],[136,9,136,10,1],[137,13,137,49,1],[138,18,138,27,1],[138,29,138,37,1],[138,39,138,42,1],[139,13,139,14,1],[140,22,140,31,1],[140,33,140,41,1],[140,43,140,46,1],[141,17,141,18,1],[142,21,142,53,1],[143,17,143,18,1],[144,13,144,14,1],[145,13,145,27,1],[146,9,146,10,1]]);
    </script>
  </body>
</html>