<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>D:\Programming\Projects\LlmUnitTestGenerationArtifacts\Gpt5MiniUnitTests\Sample4Tests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using AutoMapper;
using Dataset.Sample4;
using NSubstitute;

namespace Gpt5MiniUnitTests
{
    public class CompanyServiceTests
    {
        [Fact]
        public async Task GetAsync_WhenCalledWithDefaultId_ReturnsMappedCompanyModel()
        {
            // Arrange
            var repository = Substitute.For&lt;ICompanyRepository&gt;();
            var mapper = Substitute.For&lt;IMapper&gt;();

            var entity = new CompanyEntity { Id = 1, Name = &quot;TestCo&quot;, Description = &quot;Desc&quot; };
            var model = new CompanyModel { Id = 1, Name = &quot;TestCoMapped&quot;, Description = &quot;DescMapped&quot; };

            repository.GetAsync(1).Returns(Task.FromResult(entity));
            mapper.Map&lt;CompanyModel&gt;(entity).Returns(model);

            var service = new CompanyService(repository, mapper);

            // Act
            var result = await service.GetAsync();

            // Assert
            Assert.Same(model, result);
            repository.Received(1).GetAsync(1);
            mapper.Received(1).Map&lt;CompanyModel&gt;(Arg.Is&lt;CompanyEntity&gt;(e =&gt; e == entity));
        }

        [Fact]
        public async Task GetAsync_WithSpecificId_PassesIdToRepositoryAndReturnsMappedModel()
        {
            // Arrange
            var repository = Substitute.For&lt;ICompanyRepository&gt;();
            var mapper = Substitute.For&lt;IMapper&gt;();

            int requestedId = 42;
            var entity = new CompanyEntity { Id = requestedId, Name = &quot;Company42&quot;, Description = &quot;Desc42&quot; };
            var model = new CompanyModel { Id = requestedId, Name = &quot;Company42Mapped&quot;, Description = &quot;Desc42Mapped&quot; };

            repository.GetAsync(requestedId).Returns(Task.FromResult(entity));
            mapper.Map&lt;CompanyModel&gt;(entity).Returns(model);

            var service = new CompanyService(repository, mapper);

            // Act
            var result = await service.GetAsync(requestedId);

            // Assert
            Assert.Same(model, result);
            repository.Received(1).GetAsync(requestedId);
            mapper.Received(1).Map&lt;CompanyModel&gt;(Arg.Is&lt;CompanyEntity&gt;(e =&gt; e == entity));
        }

        [Fact]
        public async Task GetAsync_WhenRepositoryReturnsNull_MapperCalledWithNullAndReturnsNullModel()
        {
            // Arrange
            var repository = Substitute.For&lt;ICompanyRepository&gt;();
            var mapper = Substitute.For&lt;IMapper&gt;();

            repository.GetAsync(Arg.Any&lt;int&gt;()).Returns(Task.FromResult&lt;CompanyEntity?&gt;(null));
            mapper.Map&lt;CompanyModel&gt;(Arg.Is&lt;CompanyEntity&gt;(e =&gt; e == null)).Returns((CompanyModel?)null);

            var service = new CompanyService(repository, mapper);

            // Act
            var result = await service.GetAsync(5);

            // Assert
            Assert.Null(result);
            repository.Received(1).GetAsync(5);
            mapper.Received(1).Map&lt;CompanyModel&gt;(Arg.Is&lt;CompanyEntity&gt;(e =&gt; e == null));
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[11,9,11,10,1],[13,13,13,67,1],[14,13,14,52,1],[16,13,16,94,1],[17,13,17,104,1],[19,13,19,69,1],[20,13,20,61,1],[22,13,22,66,1],[25,13,25,51,1],[28,13,28,40,1],[29,13,29,48,1],[30,13,30,91,1],[31,9,31,10,1],[35,9,35,10,1],[37,13,37,67,1],[38,13,38,52,1],[40,13,40,34,1],[41,13,41,109,1],[42,13,42,119,1],[44,13,44,79,1],[45,13,45,61,1],[47,13,47,66,1],[50,13,50,62,1],[53,13,53,40,1],[54,13,54,58,1],[55,13,55,91,1],[56,9,56,10,1],[60,9,60,10,1],[62,13,62,67,1],[63,13,63,52,1],[65,13,65,96,1],[66,13,66,106,1],[68,13,68,66,1],[71,13,71,52,1],[74,13,74,33,1],[75,13,75,48,1],[76,13,76,89,1],[77,9,77,10,1]]);
    </script>
  </body>
</html>