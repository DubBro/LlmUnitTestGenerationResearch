<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>D:\Programming\Projects\LlmUnitTestGenerationArtifacts\Qwen3Coder30BUnitTests\Sample7Tests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using Dataset.Sample7;
using NSubstitute;

namespace Qwen3Coder30BUnitTests
{
    public class WalkServiceTests
    {
        private readonly IWalkRepository _walkRepository;
        private readonly IWalkService _walkService;

        public WalkServiceTests()
        {
            _walkRepository = Substitute.For&lt;IWalkRepository&gt;();
            _walkService = new WalkService(_walkRepository);
        }

        [Fact]
        public async Task Get10LongestWalksAsync_WithValidImei_ReturnsExpectedWalks()
        {
            // Arrange
            var imei = &quot;123456789012345&quot;;
            var walkEntities = new List&lt;WalkEntity&gt;
            {
                new WalkEntity { Distance = 10.5m, Duration = 30.0m },
                new WalkEntity { Distance = 15.2m, Duration = 45.0m }
            };

            _walkRepository.Get10LongestWalksAsync(imei).Returns(walkEntities);

            // Act
            var result = await _walkService.Get10LongestWalksAsync(imei);

            // Assert
            Assert.NotNull(result);
            var resultList = result.ToList();
            Assert.Equal(2, resultList.Count);
            Assert.Equal(1, resultList[0].Number);
            Assert.Equal(10.5m, resultList[0].Distance);
            Assert.Equal(30.0m, resultList[0].Duration);
            Assert.Equal(2, resultList[1].Number);
            Assert.Equal(15.2m, resultList[1].Distance);
            Assert.Equal(45.0m, resultList[1].Duration);
        }

        [Theory]
        [InlineData(null)]
        [InlineData(&quot;&quot;)]
        [InlineData(&quot;123&quot;)]
        [InlineData(&quot;1234567890123456&quot;)]
        [InlineData(&quot;abcde1234567890&quot;)]
        public async Task Get10LongestWalksAsync_WithInvalidImei_ThrowsBusinessException(string imei)
        {
            // Arrange
            // Act
            var exception = await Record.ExceptionAsync(async () =&gt; await _walkService.Get10LongestWalksAsync(imei));

            // Assert
            Assert.NotNull(exception);
            Assert.IsType&lt;BusinessException&gt;(exception);
            Assert.Contains(&quot;Invalid IMEI&quot;, exception.Message);
        }

        [Fact]
        public async Task GetWalksGeneralInfoAsync_WithValidImei_ReturnsExpectedInfo()
        {
            // Arrange
            var imei = &quot;123456789012345&quot;;
            var walkInfoEntity = new WalksGeneralInfoEntity
            {
                TotalCount = 5,
                TotalDistance = 100.5m,
                TotalDuration = 120.0m
            };

            _walkRepository.GetWalksGeneralInfoAsync(imei).Returns(walkInfoEntity);

            // Act
            var result = await _walkService.GetWalksGeneralInfoAsync(imei);

            // Assert
            Assert.NotNull(result);
            Assert.Equal(5, result.TotalCount);
            Assert.Equal(100.5m, result.TotalDistance);
            Assert.Equal(120.0m, result.TotalDuration);
        }

        [Theory]
        [InlineData(null)]
        [InlineData(&quot;&quot;)]
        [InlineData(&quot;123&quot;)]
        [InlineData(&quot;1234567890123456&quot;)]
        [InlineData(&quot;abcde1234567890&quot;)]
        public async Task GetWalksGeneralInfoAsync_WithInvalidImei_ThrowsBusinessException(string imei)
        {
            // Arrange
            // Act
            var exception = await Record.ExceptionAsync(async () =&gt; await _walkService.GetWalksGeneralInfoAsync(imei));

            // Assert
            Assert.NotNull(exception);
            Assert.IsType&lt;BusinessException&gt;(exception);
            Assert.Contains(&quot;Invalid IMEI&quot;, exception.Message);
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[11,9,11,34,1],[12,9,12,10,1],[13,13,13,65,1],[14,13,14,61,1],[15,9,15,10,1],[19,9,19,10,1],[21,13,21,42,1],[22,13,26,15,1],[28,13,28,80,1],[31,13,31,74,1],[34,13,34,36,1],[35,13,35,46,1],[36,13,36,47,1],[37,13,37,51,1],[38,13,38,57,1],[39,13,39,57,1],[40,13,40,51,1],[41,13,41,57,1],[42,13,42,57,1],[43,9,43,10,1],[52,9,52,10,1],[55,13,55,69,1],[55,69,55,116,1],[55,116,55,118,1],[58,13,58,39,1],[59,13,59,57,1],[60,13,60,64,1],[61,9,61,10,1],[65,9,65,10,1],[67,13,67,42,1],[68,13,73,15,1],[75,13,75,84,1],[78,13,78,76,1],[81,13,81,36,1],[82,13,82,48,1],[83,13,83,56,1],[84,13,84,56,1],[85,9,85,10,1],[94,9,94,10,1],[97,13,97,69,1],[97,69,97,118,1],[97,118,97,120,1],[100,13,100,39,1],[101,13,101,57,1],[102,13,102,64,1],[103,9,103,10,1]]);
    </script>
  </body>
</html>